FROM python:3.11-slim

WORKDIR /app

# Copy only essential files
COPY requirements-simple.txt .
RUN pip install --no-cache-dir -r requirements-simple.txt

# Copy application code
COPY src/main_simple.py ./src/main.py
COPY src/__init__.py ./src/

# Create simple startup script
RUN echo '#!/bin/bash\nuvicorn src.main:app --host 0.0.0.0 --port 8001' > /start.sh && chmod +x /start.sh

EXPOSE 8001

CMD ["/start.sh"]